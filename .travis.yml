language: node_js
node_js:
- 'stable'
branches:
  only:
  - master
git:
  submodules: false
before_install:
- npm install
- sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
- git submodule update --init --recursive
before_script:
- export TZ=Asia/Seoul
- git config --global user.name 'amoseui'
- git config --global user.email 'amoseui@gmail.com'
- git clone https://${GH_TOKEN}@github.com/amoseui/blog.git -b gh-pages --single-branch
  .deploy_git
- sed -i'' "s~git@github.com:amoseui/blog.git~https://${GH_TOKEN}@github.com/amoseui/blog.git~"
  _config.yml
script:
- npm run generate
after_success:
- '[ "${TRAVIS_PULL_REQUEST}" = "false" ] && npm run deploy'
