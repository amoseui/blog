language: node_js
node_js:
- stable
branches:
  only:
  - master
git:
  submodules: false
before_install:
- npm install
- sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
- git submodule update --init --recursive
before_script:
- export TZ=Asia/Seoul
- git config --global user.name 'amoseui'
- git config --global user.email 'amoseui@gmail.com'
- git clone https://${GH_TOKEN}@github.com/amoseui/blog.git -b gh-pages --single-branch
  .deploy_git
- sed -i'' "s~git@github.com:amoseui/blog.git~https://${GH_TOKEN}:x-oauth-basic@github.com/amoseui/blog.git~"
  _config.yml
script:
- npm run generate
after_success:
- '[ "${TRAVIS_PULL_REQUEST}" = "false" ] && npm run deploy'
env:
  global:
  - secure: JiLWsjr2dsILRYFw1BNX7J3peYiN8ISHLoy98CB+pSxVAyhne0lWyqicUviTQ3m85aocMzDlTC3d06rRRubXTDrQV4y3fxvmazTfhjM/Zmp2fGgWsyrtCBuW+MzcvOQSFrhz4UpNMeznP4Bas9Xeui5em3368rW2Jbu6x+XzeHyG0uAWa4Vp8Tk8LBls0iFPiAHq+/lso4io4gkfW9w/amu9Ag4m/Lu+L+yi5KB+wddQDR1UyD4lJ9JE03q2Ej6XQDia/fLdg4PLMSxRbROcEvBCWsKXWkAIzf2MsbFjoUZe22dkNsVp/S+t9Q4b96jnjgE2oKbCet05yIKfvwMpXxXfacKpsTgmxLhY8RAXqYxdG6GmYRL1jESLO2DZF7q8kglsJdZ7oF8Hi7W9r98KgArGb8rU/VWP0t+RQCq5SmmyqcPvsywuasINp8b/fllZBBGhJjL5vsUxSQFJ71VannpEAbvyIpD2Q1/Ast5rG8iXJ2UmbgDQ3TcBPqj2icPRliQVOMRyC671jhI1wQHqMDTHs3YSzjxwH3tCkNg9KfbMCDrgeb682XtrXKnFfy+jejHVlt0JWut5fuCB9IS/QaMXOMkzCzCb9ebNf4YEqTyCS66LqhhlIZ3RM0vurWr67kwRpT7EaQ+KDMbwFHQ/UGQoahQuBtQg9ADpyO8NJEg=
